<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open source Very Long Baseline Interferometry: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open source Very Long Baseline Interferometry
   </div>
   <div id="projectbrief">OpenVLBI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Open source Very Long Baseline Interferometry Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Interferometric correlator clients application suite</h1>
<p>libvlbi is an open source library for correlating single dimensional streams and obtain an image from them. this repository contains the sources for building the library and a client application which correlates using the library streams captured from INDI servers by adding them using the vlbi_server script.</p>
<p><a href="https://travis-ci.org/iliaplatone/OpenVLBI"></a></p>
<h2>Build libvlbi</h2>
<div class="fragment"><div class="line">sh scripts/build.sh</div></div><!-- fragment --><h1>Implementation</h1>
<h2>Documentation</h2>
<p>You can read the API documentation at <a href="https://iliaplatone.github.io/OpenVLBI/api/">https://iliaplatone.github.io/OpenVLBI/api/</a></p>
<h2>Using libvlbi</h2>
<p>You can write an application using libvlbi by linking against libvlbi.so in your gcc command line: </p><div class="fragment"><div class="line">gcc yourapp.c -lvlbi -o yourapp</div></div><!-- fragment --><p> Each instance of vlbi is initiated by <a class="el" href="group___v_l_b_i___functions.html#ga7af54a4c1922c260e74c8a5f2fcb89d9" title="Initialize a libVLBI instance. ">vlbi_init()</a>: </p><div class="fragment"><div class="line"><a class="code" href="group___v_l_b_i___types.html#ga50f883f7e834b395856676739fe83e0e">vlbi_context</a> context = <a class="code" href="group___v_l_b_i___functions.html#ga7af54a4c1922c260e74c8a5f2fcb89d9">vlbi_init</a>();</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">dsp_stream_p stream1 = <a class="code" href="group__dsp___d_s_p_stream.html#gac1a4e2f023ac686cb930e6b45a5b720d">dsp_stream_new</a>();</div><div class="line"><a class="code" href="group__dsp___d_s_p_stream.html#gab01d4c42bda4b0b9fe736fc74da3e79d">dsp_stream_add_dim</a>(stream, elements_n);</div><div class="line">dsp_convert(input_arr, stream1-&gt;in, n_elements);</div><div class="line"></div><div class="line">stream1-&gt;location[0] = Latitude;</div><div class="line">stream1-&gt;location[1] = Longitude;</div><div class="line">stream1-&gt;location[2] = <a class="code" href="group___v_l_b_i___internal.html#ga2bf0605c5ad1d4ad4aa5c2c943c0c563">vlbi_calc_elevation_coarse</a>(Elevation);</div><div class="line"></div><div class="line">stream1-&gt;starttimeutc = <a class="code" href="group___v_l_b_i___internal.html#gabc137a0b360978e3bef523914f84b619">vlbi_time_string_to_utc</a>(<span class="stringliteral">&quot;2018-06-22T02:12.000154874&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="group___v_l_b_i___functions.html#ga71c49241bd6102390159df84a23e3957">vlbi_add_stream</a>(context, stream1);</div><div class="line"></div><div class="line"><a class="code" href="structdsp__stream__t.html">dsp_stream_p</a> stream2 = <a class="code" href="group__dsp___d_s_p_stream.html#gac1a4e2f023ac686cb930e6b45a5b720d">dsp_stream_new</a>();</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">vlbi_add_stream(context, stream2);</div><div class="line"></div><div class="line"><a class="code" href="structdsp__stream__t.html">dsp_stream_p</a> stream3 = <a class="code" href="group__dsp___d_s_p_stream.html#gac1a4e2f023ac686cb930e6b45a5b720d">dsp_stream_new</a>();</div><div class="line">...</div><div class="line"></div><div class="line">vlbi_add_stream(context, stream3);</div><div class="line">...</div><div class="line"></div><div class="line">dsp_t* target = calloc(<span class="keyword">sizeof</span>(vlbi_t), 3);</div><div class="line">target[0] = RightAscension * 360.0 / 24.0;</div><div class="line">target[1] = Declination;</div><div class="line"></div><div class="line"><a class="code" href="group___d_s_p___defines.html#ga73df7c5a60ce5e6572c8c79035503a75">dsp_t</a> frequency = 60.0e+6;</div><div class="line"><a class="code" href="group___d_s_p___defines.html#ga73df7c5a60ce5e6572c8c79035503a75">dsp_t</a> samplerate = 100.0e+6;</div><div class="line"></div><div class="line"><span class="comment">//obtain the UV plot of the observation</span></div><div class="line"><a class="code" href="structdsp__stream__t.html">dsp_stream</a> uvplot = vlbi_get_uv_plot_astro(context, u, v, target, frequency, samplerate); <span class="comment">// this will return</span></div><div class="line"><span class="comment">//the aproximate Fourier transform of the observation taken (the more are the streams, and more</span></div><div class="line"><span class="comment">//accurate and precise is each stream and data, the less aproximate will be the result).</span></div><div class="line"><a class="code" href="structdsp__stream__t.html">dsp_stream</a> image_estimation = <a class="code" href="group___v_l_b_i___functions.html#ga171f79cc83a4cbd4f1f00ed7d86d6b5a">vlbi_get_fft_estimate</a>(uvplot); <span class="comment">// this is the aproximation</span></div><div class="line"><span class="comment">//of the image of the target, with aproximation basis the taken observations.</span></div><div class="line">...</div><div class="line"></div><div class="line">dsp_stream_free(uvplot);</div><div class="line"><a class="code" href="group___v_l_b_i___functions.html#ga32534f7714c02277cd0eb519022f1c6f">vlbi_exit</a>(context);</div></div><!-- fragment --><h1>OpenVLBI client using INDI libraries</h1>
<p>OpenVLBI comes with an application which uses the core library and using an INDI server which contains a number of drivers with the necessary properties It needs an indi server on which to connect. Such server must connect to each node to be added to the vlbi client application. OpenVLBI nodes must contain informations about location, and should permit driving of the telescopes or antennas to the same celestial coordinates, tracking must be supported on the mountings and each node should capture and run at the same bit depth, frequency and possibly bandwidth and gain.</p>
<p>The needed INDI interfaces are so:</p><ul>
<li>INDI::BaseDevice::TELESCOPE_INTERFACE</li>
<li>INDI::BaseDevice::GPS_INTERFACE</li>
<li>INDI::BaseDevice::DETECTOR_INTERFACE</li>
</ul>
<p>and optionally, also for autoguiding:</p><ul>
<li>INDI::BaseDevice::CCD_INTERFACE</li>
<li>INDI::BaseDevice::GUIDER_INTERFACE</li>
</ul>
<p>The properties used by this client are:</p><ul>
<li>"EQUATORIAL_EOD_COORDS" RA and DEC from telescope for gotos and slews</li>
<li>"TELESCOPE_TRACK_STATE" from telescope for tracking</li>
<li>"GEOGRAPHIC_COORDS" LATITUDE, LONGITUDE and ELEVATION to fill the UV plane and plot the frequency response</li>
<li>"DETECTOR_CAPTURE" to start capture</li>
<li>"DETECTOR_SETTINGS" set up frequency, bandwidth, sampling rate and depth, and gain of the detectors</li>
</ul>
<p>The vlbi client application opens a command shell and reads from stdin. Format of commands is: cmd arg value:type where type can be string or numeric.</p>
<p>Here is the current command list:</p>
<div class="fragment"><div class="line">add context name:<span class="keywordtype">string</span> - add an OpenVLBI context to the <span class="keyword">internal</span> list</div><div class="line"><span class="keyword">set</span> model name:<span class="keywordtype">string</span> - <span class="keyword">new</span> comparison model</div><div class="line"><span class="keyword">set</span> context name:<span class="keywordtype">string</span> - <span class="keyword">set</span> current OpenVLBI context selecting it by name from the <span class="keyword">internal</span> list</div><div class="line"><span class="keyword">set</span> freq value:numeric - <span class="keyword">set</span> detectors frequency</div><div class="line"><span class="keyword">set</span> bitspersample value:numeric - <span class="keyword">set</span> detectors sample bit depth</div><div class="line"><span class="keyword">set</span> gain value:numeric - <span class="keyword">set</span> detectors gain</div><div class="line"><span class="keyword">set</span> bandwidth value:numeric - <span class="keyword">set</span> detectors bandwidth</div><div class="line"><span class="keyword">set</span> samplerate value:numeric - <span class="keyword">set</span> detectors sampling rate</div><div class="line"><span class="keyword">set</span> target ra,dec:numeric,numeric - <span class="keyword">set</span> telescopes celestial target</div><div class="line"><span class="keyword">set</span> parking state:<span class="keywordtype">string</span> - <span class="keyword">set</span> telescopes parking state (on, off)</div><div class="line"><span class="keyword">set</span> tracking state:<span class="keywordtype">string</span> - <span class="keyword">set</span> telescopes tracking state (on, off)</div><div class="line"><span class="keyword">set</span> capture value:numeric - <span class="keyword">set</span> detectors capture time in seconds</div><div class="line"><span class="keyword">set</span> exposure value:numeric - <span class="keyword">set</span> ccd cameras exposure time in seconds</div><div class="line"><span class="keyword">set</span> connection state:<span class="keywordtype">string</span> - <span class="keyword">set</span> nodes connection state (on, off)</div><div class="line"><span class="keyword">get</span> observation type:<span class="keywordtype">string</span> - <span class="keyword">get</span> UV plot observation (raw, fft, mdl) <span class="keywordflow">for</span> raw observation, frequency transformed observation and FFT of the raw observation added with the comparison model</div></div><!-- fragment --> <h1>OpenVLBI server</h1>
<p>the VLBI client can be started in daemon mode using vlbi_server, which is a script that starts a local INDI server and creates two fifo files named /tmp/INDI.fifo and /tmp/OpenVLBI.fifo. once started, you can send the commands described above by writing those direcly on the corresponding fifo or by using the command scripts. an example:</p>
<div class="fragment"><div class="line">~# vlbi_server start</div><div class="line">~# vlbi_add_node 127.0.0.1 7626</div><div class="line">~# vlbi_add_node 127.0.0.1 7627</div><div class="line">...</div><div class="line">~# vlbi_server add context obs1</div><div class="line">~# vlbi_server <span class="keyword">set</span> context obs1</div><div class="line">~# vlbi_server <span class="keyword">set</span> connection on</div><div class="line">~# vlbi_server <span class="keyword">set</span> parking off</div><div class="line">~# vlbi_server <span class="keyword">set</span> tracking off</div><div class="line">~# vlbi_server <span class="keyword">set</span> target 5.75,25.44</div><div class="line">~# vlbi_server <span class="keyword">set</span> frequency 24000000</div><div class="line">~# vlbi_server <span class="keyword">set</span> samplerate 2000000</div><div class="line">~# vlbi_server <span class="keyword">set</span> bandwidth 10000</div><div class="line">~# vlbi_server <span class="keyword">set</span> bitspersample 16</div><div class="line">~# vlbi_server <span class="keyword">set</span> gain 10</div><div class="line">~# vlbi_server <span class="keyword">set</span> capture 10</div><div class="line">...</div><div class="line">~# vlbi_server <span class="keyword">get</span> observation raw</div><div class="line">~# vlbi_server <span class="keyword">set</span> connection off</div><div class="line">~# vlbi_server stop</div></div><!-- fragment --><h1>References</h1>
<p><a href="https://link.springer.com/article/10.1007/s10686-018-9595-0">[1]</a>Optical long baseline intensity interferometry: prospects for stellar physics (Jean-Pierre Rivet, Farrokh Vakili, Olivier Lai, David Vernet, Mathilde Fouch√©, William Guerin, Guillaume Labeyrie, Robin Kaiser)</p>
<p><a href="https://link.springer.com/article/10.1007/s11214-018-0498-1">[2]</a>Very Long Baseline Interferometry: Dependencies on Frequency Stability (Axel Nothnagel, Tobias Nilsson, Harald Schuh)</p>
<p><a href="https://link.springer.com/content/pdf/10.1007/978-3-319-44431-4.pdf">[3]</a>Interferometry and synthesis in radio astronomy (AR Thompson, JM Moran, GW Swenson) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 14 2019 05:44:40 for Open source Very Long Baseline Interferometry by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
