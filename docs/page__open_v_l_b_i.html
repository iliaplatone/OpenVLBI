<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open source Very Long Baseline Interferometry: OpenVLBI servers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open source Very Long Baseline Interferometry
   </div>
   <div id="projectbrief">OpenVLBI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OpenVLBI servers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md2"></a>
OpenVLBI server sample</h2>
<p>OpenVLBI can be tested using the built vlbi_server_dummy application, which creates a subshell or takes arguments from the standard input. the source files of the sample application make use of the <a class="el" href="vlbi__server_8h_source.html">vlbi_server.h</a> source header, which contains a base class to be inherited in case that you want to build your own server or implementation.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
OpenVLBI server using INDI libraries</h2>
<p>OpenVLBI comes with vlbi_server_indi, a server that connects to an INDI server whose drivers will be treated by OpenVLBI as nodes. OpenVLBI nodes must contain informations about location, aperture, focal length, samplerate and observed frequency preferably, and should permit to slew their telescopes or antennas to the same celestial coordinates. tracking must be supported by the mounts and each node should capture and run at the same bit depth, frequency and possibly bandwidth and gain. After each capture is done, a new node will be added to the OpenVLBI context by parsing the received FITS.</p>
<p>The needed INDI interfaces are so:</p><ul>
<li>INDI::BaseDevice::TELESCOPE_INTERFACE</li>
<li>INDI::BaseDevice::GPS_INTERFACE</li>
<li>INDI::BaseDevice::DETECTOR_INTERFACE</li>
<li>INDI::BaseDevice::RECEIVER_INTERFACE</li>
</ul>
<p>and optionally, also for autoguiding:</p><ul>
<li>INDI::BaseDevice::CCD_INTERFACE</li>
<li>INDI::BaseDevice::GUIDER_INTERFACE</li>
</ul>
<p>The properties used by this server are:</p><ul>
<li>"EQUATORIAL_EOD_COORDS" RA and DEC from telescope for gotos and slews</li>
<li>"TELESCOPE_TRACK_STATE" from telescope for tracking</li>
<li>"GEOGRAPHIC_COORDS" LATITUDE, LONGITUDE and ELEVATION to fill the UV plane and plot the frequency response</li>
<li>"DETECTOR_CAPTURE" to start capture</li>
<li>"DETECTOR_SETTINGS" set up frequency, bandwidth, sampling rate and depth, and gain of the detectors</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
OpenVLBI servers usage</h2>
<p>The vlbi server applications open a command shell and read from stdin. Format of commands is: cmd arg value:type where type can be string or numeric.</p>
<p>Here is the current command list:</p>
<div class="fragment"><div class="line">add context name:<span class="keywordtype">string</span> - add an OpenVLBI context to the <span class="keyword">internal</span> list</div>
<div class="line">set context name:<span class="keywordtype">string</span> - set current OpenVLBI context selecting it by name from the <span class="keyword">internal</span> list</div>
<div class="line">set mask name,model,mask:string,string,sting - mask the model with mask, and save the masked model into name</div>
<div class="line">set shifted name:<span class="keywordtype">string</span> - shift the model by its dimensions</div>
<div class="line">add node name,geo|xyz,latitude|x,longitude|y,elevation|z,datafile,observationdate:<span class="keywordtype">string</span> - add a node to the <span class="keyword">internal</span> list</div>
<div class="line">add plot name,projection,synch,type:string,string,string,<span class="keywordtype">string</span> - add a model with the plot of the perspective projection of all nodes during the observation in format ([synthesis|movingbase],[delay|nodelay],[raw|coverage]) synthesis <span class="keywordflow">for</span> aperture synthesis observation or to plot the UV coverage. delay to automatically calculate delays between nodes, nodelay means that they are already <span class="keyword">synchronized</span>, raw will fill the perspective path with the correlation degree of the respective baseline, coverage will create a mask to apply to a phase model or a simulated magnitude.</div>
<div class="line">add idft idft,magnitude,phase:string,string,<span class="keywordtype">string</span> add a model named idft from the magnitude and phase models passed</div>
<div class="line">add dft idft,magnitude,phase:string,string,<span class="keywordtype">string</span> add the phase and magnitude models obtained from the model passed as idft</div>
<div class="line">add model name,format,data:string,string,<span class="keywordtype">string</span> add a <span class="keyword">new</span> model from the base64 encoded <span class="keywordtype">string</span> containing the picture file buffer, and format as [jpeg|png|fits]</div>
<div class="line">set frequency value:numeric - set detectors frequency</div>
<div class="line">set bitspersample value:numeric - set detectors sample bit depth</div>
<div class="line">set samplerate value:numeric - set detectors sampling rate</div>
<div class="line">set target ra,dec:numeric,numeric - set telescopes celestial target</div>
<div class="line">set resolution WxH:numeric,numeric - set the resolution of the output picture of the Fourier plane</div>
<div class="line">set location latitude,longitude,elevation:numeric,numeric - set the reference station coordinates <span class="keywordflow">for</span> xyz node locations relative to <span class="keyword">this</span></div>
<div class="line">get models - get the models list with names and dimensions</div>
<div class="line">get nodes - get the nodes list with their data</div>
<div class="line">get baselines - get the baselines list with their data</div>
<div class="line">get model name,format:string,<span class="keywordtype">string</span> get the model with name in ([png|jpeg|fits]) format, base64 encoded</div>
<div class="line">del model name:<span class="keywordtype">string</span> - remove a model from the current context</div>
<div class="line">del node name:<span class="keywordtype">string</span> - remove a node from the current context</div>
<div class="line">del context name:<span class="keywordtype">string</span> - remove a context from the <span class="keyword">internal</span> list</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
INDI server specific commands</h3>
<div class="fragment"><div class="line">set gain value:numeric - set detectors gain</div>
<div class="line">set bandwidth value:numeric - set detectors bandwidth</div>
<div class="line">set parking state:<span class="keywordtype">string</span> - set telescopes parking state (on, off)</div>
<div class="line">set tracking state:<span class="keywordtype">string</span> - set telescopes tracking state (on, off)</div>
<div class="line">set capture value:numeric - set detectors capture time in seconds</div>
<div class="line">set exposure value:numeric - set ccd cameras exposure time in seconds</div>
<div class="line">set connection state:<span class="keywordtype">string</span> - set nodes connection state (on, off)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 8 2021 23:23:19 for Open source Very Long Baseline Interferometry by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
